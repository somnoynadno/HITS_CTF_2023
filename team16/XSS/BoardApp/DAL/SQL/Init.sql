-- DB INIT --

DROP TABLE IF EXISTS BoardMembers;
DROP TABLE IF EXISTS Messages;
DROP TABLE IF EXISTS Boards;
DROP TABLE IF EXISTS Users;

CREATE TABLE Users
(
	Id UUID PRIMARY KEY,
	Username VARCHAR(100) NOT NULL UNIQUE,
	Password VARCHAR(100) NOT NULL
);

CREATE TABLE Boards
(
	Id UUID PRIMARY KEY,
	Name VARCHAR(100) NOT NULL UNIQUE,
	AuthorId UUID NOT NULL,
	IsPrivate BOOLEAN NOT NULL DEFAULT FALSE,
	FOREIGN KEY (AuthorId) REFERENCES Users (Id) ON DELETE CASCADE
);

CREATE TABLE BoardMembers
(
	BoardId UUID NOT NULL,
	UserId UUID NOT NULL,
	FOREIGN KEY (BoardId) REFERENCES Boards (Id) ON DELETE CASCADE,
	FOREIGN KEY (UserId) REFERENCES Users (Id) ON DELETE CASCADE
);

CREATE TABLE Messages
(
	Id UUID PRIMARY KEY,
	AuthorId UUID NOT NULL,
	BoardId UUID NOT NULL,
	Content TEXT NOT NULL,
	FOREIGN KEY (AuthorId) REFERENCES Users (Id) ON DELETE CASCADE,
	FOREIGN KEY (BoardId) REFERENCES Boards (Id) ON DELETE CASCADE
);